<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neo4j</title>
    <link rel="stylesheet" href="/static/css/all.min.css">
    <link rel="stylesheet" href="/static/css/vis-network.min.css"/>
    <script src="/static/js/vis-network.min.js"></script>

    <link rel="stylesheet" href="/static/css/ui.css">
    <script src="/static/js/ui.js"></script>
    <style></style>
</head>
<body>
    <nav>
        <div class="logo"><a href="/"><i class="fa-solid fa-virus" style="padding-right: 4px"></i>GermBot</a></div>
        <div class="nav-links">
            <a id="chat-nav-link" href="/"><i class="fa-solid fa-comment" style="padding-right: 4px"></i>Chat</a>
            <a href="/static/neo4j.html"><i class="fa-solid fa-share-nodes" style="padding-right: 4px"></i><u>Neo4j</u></a>
            <a href="/static/postgres.html"><i class="fa-solid fa-code" style="padding-right: 4px"></i>Postgres</a>
        </div>
    </nav>
    <div id="error-popup" class="hidden">
        <button id="close-error-popup">X</button>
        <span id="error-popup-message-text"></span>
    </div>
    <div id="graph-container" style="width: 100%; height: 100%; border: 1px solid #ccc;"></div>
    <script>
    // create an array with nodes
    function loadGraph(data) {
        const nodes = new vis.DataSet(data.nodes);
        const edges = new vis.DataSet(data.edges);

        // create a network
        let container = document.getElementById('graph-container');

        // provide the data in the vis format
        let visData = {
            nodes: nodes,
            edges: edges
        };
        let options = {
            configure: {
                enabled: true,
                filter: 'nodes,edges',
            },
            edges: {
                arrows: {
                    to: {
                        enabled: true,
                    }
                }
            },
            nodes: {
                shape: "box"
            },
        };
        // initialize your network!
        new vis.Network(container, visData, options);
    }
    fetch('/graph')
        .then(response => response.json())
        .then(data => loadGraph(data))
        .catch(error => handleError(error));
    </script>
</body>
</html>
